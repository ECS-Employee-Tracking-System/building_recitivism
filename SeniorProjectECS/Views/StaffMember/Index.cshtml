@model IEnumerable<StaffMember>
@using SeniorProjectECS.Library;

<!--Used to sort table with tablesorter script and ` in layout -->
<script type="text/javascript">
    $(document).ready(function () {
        $("#myTable").DataTable();
    });
</script>
<div class="row">
    <img src="~/images/ecslogo.png" class="img-responsive" align="left" style="width: 165px; height: 55px" />
</div>
<link rel="stylesheet" href="~/css/legendstyling.css" />

<div class="container">
    <div class="row">
        <div class="col">

        </div>
        <div class="col">

        </div>
    </div>
</div>

<div class="row">
    <div class="col-12 col-md-8"></div>
    <div class="col-6 col-md-4">.</div>
</div>

<div class="col-2 col-md-2">
    <div class='my-legend'>
        <div class='legend-title'>Color Legend</div>
        <div class='legend-scale'>
            <ul class='legend-labels'>
                <li><span style='background:#FB8072;'></span>30 Days before CDA Expires</li>
                <li><span style='background:#FFFFB3;'></span>60 Days before CDA Expires</li>
                <li><span style='background:#80B1D3;'></span>90 Days before CDA Expires</li>
            </ul>
        </div>
    </div>
</div>
<div class="col-12 col-md-10 container page-header">
    <h2>@Html.Raw(ViewBag.LoggedUser)'s @Html.Raw(ViewBag.AccessRole) Staff Management Panel</h2>
</div>
<div class="col-12 col-md-10 container">
    <table class="col-12 col-md-10 col-sm-1 table table-hover table-bordered table-condensed tablesorter" id="myTable">
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th><i class="glyphicon glyphicon-envelope"></i> Email</th>
                <th>Position</th>
                <th>Date of Hire</th>
                <th>Center</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var staff in Model)
            {
                    <tr>
                        <td>@Html.ActionLink(staff.FirstName, "Details", new { id = staff.StaffMemberID })</td>
                        <td>@staff.LastName</td>
                        <td>@staff.Email</td>
                        <td>
                            @foreach (Position pos in staff.Positions)
                            {
                                @pos.PositionTitle
                            }
                        </td>
                        <td>@staff.DateOfHire.Value.ToShortDateString()</td>
                        <td>@staff.Center.Name</td>
                        <td AdminOnly>@Html.ActionLink("Edit", "Edit", new { id = staff.StaffMemberID })</td>
                    </tr>

                
            }
        </tbody>
    </table>
    <div>@Html.ActionLink("Previous", "Index", new { page = ViewBag.PageNumber - 1 }) | @Html.ActionLink("Next", "Index", new { page = ViewBag.PageNumber + 1 })</div><br />
    <div AdminOnly class="container">
        <a class="btn btn-primary btn-default" @Html.ActionLink("Add New User", "Create", "StaffMember")</a> <a class="btn btn-primary btn-default" @Html.ActionLink("View Inactive Staff", "Inactive", "StaffMember")</a>
        <a class="btn btn-primary btn-default" @Html.ActionLink("Manage User Accounts", "Index", "User")</a> <a class="btn btn-primary btn-default" @Html.ActionLink("Maintenance Page", "Index", "Maintenance")</a>
    </div>
</div>
